# Implementation Plan

- [x] 1. Подготовка проекта и создание структуры





  - Создать новую структуру папок согласно дизайну
  - Создать базовые файлы для core, services, components, modules
  - Настроить правильные пути импорта для ES6 модулей
  - _Requirements: 2.1, 2.2, 2.3, 2.4, 6.6, 6.7_

- [x] 2. Создание Core системы






  - [x] 2.1 Создать базовый класс OrdinaApp в js/core/app.js

    - Реализовать конструктор с инициализацией state
    - Добавить методы registerModule, registerService, getService
    - Реализовать метод init() для инициализации приложения
    - Добавить метод loadModule() для загрузки модулей
    - _Requirements: 2.1, 2.4, 2.5, 2.6_


  - [x] 2.2 Создать Router в js/core/router.js

    - Реализовать класс Router с методами register и navigate
    - Добавить обработку навигации между модулями
    - Реализовать updateUI для обновления активной вкладки
    - Добавить поддержку истории браузера (опционально)
    - _Requirements: 2.1, 2.4, 2.6_


  - [x] 2.3 Переместить Firebase конфигурацию в js/core/firebase.js

    - Создать отдельный модуль для инициализации Firebase
    - Экспортировать app, db, auth для использования в сервисах
    - Добавить обработку ошибок инициализации
    - _Requirements: 2.1, 2.4, 6.1, 6.2_

- [x] 3. Создание Service Layer






  - [x] 3.1 Создать WeatherService в js/services/weather.service.js

    - Реализовать метод getWeather(city) с кэшированием
    - Добавить метод getWeatherByCoords(lat, lon) для геолокации
    - Реализовать getMockWeather() для fallback данных
    - Использовать API ключ: 91b705287b193e8debf755a8ff4cb0c7
    - Добавить обработку ошибок API
    - _Requirements: 1.7, 3.2, 3.3, 3.5, 3.7, 3.8_


  - [x] 3.2 Создать FirestoreService в js/services/firestore.service.js

    - Реализовать CRUD методы для expenses
    - Реализовать CRUD методы для debts
    - Реализовать CRUD методы для tasks
    - Реализовать CRUD методы для calendar events
    - Добавить обработку ошибок Firestore
    - _Requirements: 2.1, 2.4, 5.5, 7.5_


  - [x] 3.3 Создать AuthService в js/services/auth.service.js

    - Переместить логику аутентификации из модуля auth
    - Реализовать методы login, register, logout
    - Добавить метод для Google аутентификации
    - Реализовать обработку ошибок аутентификации
    - _Requirements: 2.1, 2.4, 5.1, 7.5_


  - [x] 3.4 Создать NewsService в js/services/news.service.js

    - Переместить логику работы с News API
    - Добавить кэширование новостей
    - Реализовать обработку ошибок API
    - Добавить fallback данные при недоступности API
    - _Requirements: 2.1, 2.4, 6.2, 6.3_

- [x] 4. Создание Utils и Helpers




  - [x] 4.1 Реорганизовать js/utils/helpers.js


    - Переместить вспомогательные функции из utils.js
    - Добавить функции для работы с DOM
    - Добавить debounce и throttle функции
    - _Requirements: 2.1, 7.1, 7.5, 7.6_

  - [x] 4.2 Создать js/utils/formatters.js


    - Переместить formatCurrency, formatISODateForDisplay
    - Добавить форматтеры для чисел, дат, времени
    - Добавить JSDoc комментарии
    - _Requirements: 2.1, 7.1, 7.2, 7.6_

  - [x] 4.3 Создать js/utils/validators.js


    - Добавить валидацию email, паролей
    - Добавить валидацию форм
    - Добавить валидацию дат и чисел
    - _Requirements: 2.1, 7.1, 7.2_

  - [x] 4.4 Создать js/utils/storage.js


    - Создать обертку для localStorage
    - Добавить методы get, set, remove с типизацией
    - Добавить обработку ошибок storage
    - _Requirements: 2.1, 5.5, 7.5_

- [x] 5. Создание базовых компонентов





  - [x] 5.1 Создать WeatherComponent в js/components/weather/


    - Создать weather.component.js с классом WeatherComponent
    - Создать weather.template.js с функциями рендеринга
    - Реализовать методы mount, render, loadWeather
    - Добавить обработчики для смены города и геолокации
    - _Requirements: 2.1, 2.2, 3.1, 3.2, 3.3, 3.4, 3.6, 3.8_

  - [x] 5.2 Создать HeaderComponent в js/components/header/


    - Создать header.component.js с логикой верхней панели
    - Создать header.template.js с HTML шаблоном
    - Реализовать sticky поведение
    - Добавить адаптивность для мобильных устройств
    - _Requirements: 2.1, 2.2, 3.1, 3.6, 4.6_

  - [x] 5.3 Создать ToastComponent в js/components/toast/


    - Создать toast.component.js для уведомлений
    - Создать toast.template.js с шаблонами
    - Реализовать методы show, hide с анимациями
    - Добавить поддержку разных типов (success, error, info)
    - _Requirements: 2.1, 2.2, 5.3_

  - [x] 5.4 Создать ModalComponent в js/components/modal/


    - Создать базовый класс для модальных окон
    - Реализовать методы open, close с анимациями
    - Добавить backdrop и обработку ESC
    - _Requirements: 2.1, 2.2, 5.3_

- [x] 6. Миграция модуля Dashboard




  - [x] 6.1 Создать структуру модуля dashboard


    - Создать dashboard.module.js с классом DashboardModule
    - Создать dashboard.controller.js для бизнес-логики
    - Создать dashboard.template.js для HTML шаблонов
    - _Requirements: 2.1, 2.2, 2.7, 5.1_

  - [x] 6.2 Реализовать логику Dashboard


    - Переместить код из js/modules/dashboard.js
    - Реализовать методы fetchData, render, setupEventListeners
    - Добавить расчет статистики
    - Интегрировать с FirestoreService
    - _Requirements: 2.1, 5.1, 5.2, 7.5_

  - [x] 6.3 Реализовать рендеринг графиков


    - Переместить логику Chart.js
    - Добавить адаптивность графиков
    - Реализовать обновление при изменении данных
    - _Requirements: 4.3, 5.1, 5.8_

- [x] 7. Миграция модуля Expenses




  - [x] 7.1 Создать структуру модуля expenses


    - Создать expenses.module.js, expenses.controller.js, expenses.template.js
    - Реализовать BaseModule интерфейс
    - _Requirements: 2.1, 2.2, 2.7, 5.1_

  - [x] 7.2 Реализовать логику Expenses


    - Переместить код из js/modules/expenses.js
    - Интегрировать с FirestoreService
    - Реализовать CRUD операции
    - Добавить валидацию форм
    - _Requirements: 2.1, 5.1, 5.2, 7.5_

  - [x] 7.3 Создать модальное окно добавления расхода


    - Использовать ModalComponent
    - Добавить форму с валидацией
    - Реализовать сохранение в Firestore
    - _Requirements: 2.1, 5.1, 5.5_

- [x] 8. Миграция модуля Debts






  - [x] 8.1 Создать структуру модуля debts



    - Создать debts.module.js, debts.controller.js, debts.template.js
    - Реализовать BaseModule интерфейс
    - _Requirements: 2.1, 2.2, 2.7, 5.1_

  - [x] 8.2 Реализовать логику Debts


    - Переместить код из js/modules/debts.js
    - Интегрировать с FirestoreService
    - Реализовать добавление платежей
    - Добавить расчет остатка долга
    - _Requirements: 2.1, 5.1, 5.2, 7.5_

- [x] 9. Миграция модуля Tasks




  - [x] 9.1 Создать структуру модуля tasks


    - Создать tasks.module.js, tasks.controller.js, tasks.template.js
    - Реализовать BaseModule интерфейс
    - _Requirements: 2.1, 2.2, 2.7, 5.1_

  - [x] 9.2 Реализовать логику Tasks


    - Переместить код из js/modules/tasks.js
    - Реализовать отдельные списки для daily, monthly, yearly
    - Добавить переключение статуса задач
    - Интегрировать с FirestoreService
    - _Requirements: 2.1, 5.1, 5.2, 7.5_

- [x] 10. Миграция модуля Calendar




  - [x] 10.1 Создать структуру модуля calendar


    - Создать calendar.module.js, calendar.controller.js, calendar.template.js
    - Реализовать BaseModule интерфейс
    - _Requirements: 2.1, 2.2, 2.7, 5.1_

  - [x] 10.2 Реализовать логику Calendar


    - Реализовать рендеринг календаря
    - Добавить навигацию по месяцам
    - Реализовать добавление событий
    - Интегрировать с FirestoreService
    - _Requirements: 2.1, 5.1, 5.2, 7.5_

- [x] 11. Миграция модуля News




  - [x] 11.1 Создать структуру модуля news


    - Создать news.module.js, news.controller.js, news.template.js
    - Реализовать BaseModule интерфейс
    - _Requirements: 2.1, 2.2, 2.7, 5.1_


  - [x] 11.2 Реализовать логику News

    - Переместить код из js/modules/news.js
    - Интегрировать с NewsService
    - Реализовать пагинацию
    - Добавить фильтры по стране и категории
    - _Requirements: 2.1, 5.1, 5.2, 6.2_

- [x] 12. Реорганизация CSS




  - [x] 12.1 Создать css/core/ файлы


    - Создать variables.css с CSS переменными
    - Создать reset.css для нормализации
    - Создать typography.css для шрифтов
    - Создать animations.css для анимаций
    - _Requirements: 2.3, 5.3, 7.1, 7.7_

  - [x] 12.2 Создать css/layout/ файлы


    - Переместить стили header в layout/header.css
    - Создать navigation.css для табов
    - Удалить дублирование header.css
    - _Requirements: 2.3, 5.3, 7.5_

  - [x] 12.3 Создать css/components/ файлы


    - Создать buttons.css для всех кнопок
    - Создать cards.css для карточек
    - Создать forms.css для форм
    - Создать modals.css для модальных окон
    - Обновить weather.css с улучшенной адаптивностью
    - Создать отдельные CSS для каждого модуля
    - _Requirements: 2.3, 4.1, 4.2, 4.3, 4.4, 4.5, 4.6, 4.8, 4.9, 4.10_

  - [x] 12.4 Создать css/themes/ файлы


    - Разделить светлую и темную темы
    - Создать light.css и dark.css
    - Обеспечить плавное переключение
    - _Requirements: 1.4, 5.4_

  - [x] 12.5 Создать css/responsive/ файлы


    - Создать mobile.css (320px - 640px)
    - Создать tablet.css (641px - 1024px)
    - Создать desktop.css (1025px+)
    - Добавить все необходимые breakpoints
    - Оптимизировать для touch устройств
    - _Requirements: 4.1, 4.2, 4.3, 4.4, 4.5, 4.6, 4.7, 4.8, 4.9, 4.10, 4.11, 4.12_

  - [x] 12.6 Создать главный css/main.css


    - Импортировать все CSS модули в правильном порядке
    - Удалить дублирование стилей
    - Оптимизировать порядок загрузки
    - _Requirements: 2.3, 7.5, 7.7_

- [x] 13. Обновление index.html







  - [x] 13.1 Минимизировать HTML структуру

    - Удалить встроенные стили
    - Оставить только структуру разметки
    - Добавить правильные id для контейнеров модулей
    - _Requirements: 2.1, 6.6, 6.7_


  - [x] 13.2 Обновить подключение скриптов

    - Добавить type="module" для main.js
    - Использовать относительные пути
    - Убедиться в правильном порядке загрузки
    - _Requirements: 2.4, 2.5, 6.1, 6.2, 6.5_


  - [x] 13.3 Обновить подключение стилей

    - Подключить только main.css
    - Удалить дублирующиеся подключения
    - Использовать относительные пути
    - _Requirements: 6.1, 6.7_

- [x] 14. Создание главного файла инициализации




  - [x] 14.1 Создать js/main.js

    - Импортировать OrdinaApp
    - Импортировать все сервисы
    - Импортировать все модули
    - Реализовать инициализацию приложения
    - _Requirements: 2.1, 2.4, 2.5, 2.6, 6.5_


  - [x] 14.2 Настроить регистрацию модулей

    - Зарегистрировать все модули в app
    - Настроить роутинг
    - Добавить обработку аутентификации
    - _Requirements: 2.1, 2.6, 5.1_



  - [x] 14.3 Добавить обработку ошибок

    - Создать глобальный error handler
    - Добавить логирование ошибок
    - Реализовать graceful degradation
    - _Requirements: 1.2, 1.5, 3.5, 7.5_

- [x] 15. Улучшение верхней панели и погоды






  - [x] 15.1 Полностью переработать верхнюю панель

    - Обеспечить sticky позиционирование
    - Улучшить адаптивность для всех экранов
    - Добавить плавные анимации
    - Оптимизировать для мобильных устройств
    - _Requirements: 3.1, 3.6, 4.6, 4.8, 4.9_


  - [x] 15.2 Улучшить виджет погоды

    - Использовать валидный API ключ: 91b705287b193e8debf755a8ff4cb0c7
    - Добавить кэширование запросов
    - Реализовать fallback при ошибках API
    - Улучшить UI и анимации загрузки
    - Добавить полную адаптивность
    - _Requirements: 3.2, 3.3, 3.4, 3.5, 3.7, 3.8, 4.6_

- [x] 16. Тестирование и исправление ошибок






  - [x] 16.1 Тестирование на разных устройствах

    - Протестировать на iPhone (iOS Safari)
    - Протестировать на Android (Chrome)
    - Протестировать на Desktop (Chrome, Firefox, Edge)
    - Проверить все breakpoints (320px, 480px, 768px, 1024px, 1440px)
    - _Requirements: 1.1, 1.2, 1.3, 4.12_

  - [x] 16.2 Тестирование функционала

    - Проверить все CRUD операции
    - Проверить аутентификацию
    - Проверить переключение тем
    - Проверить переключение языков
    - Проверить переключение валют
    - _Requirements: 1.2, 5.1, 5.2, 5.3, 5.4, 5.5, 5.7_


  - [x] 16.3 Исправление найденных ошибок





    - Исправить ошибки консоли
    - Исправить проблемы адаптивности
    - Исправить проблемы производительности
    - _Requirements: 1.1, 1.2, 1.5, 5.8_

- [x] 17. Оптимизация и финальная проверка





  - [x] 17.1 Оптимизация производительности
    - Добавить lazy loading для модулей
    - Оптимизировать размеры изображений
    - Добавить кэширование где необходимо
    - Минимизировать количество перерисовок
    - _Requirements: 5.8, 7.5_



  - [x] 17.2 Проверка GitHub Pages совместимости
    - Проверить все относительные пути
    - Проверить загрузку ES6 модулей
    - Проверить CORS для внешних API
    - Протестировать на реальном GitHub Pages
    - _Requirements: 1.6, 6.1, 6.2, 6.3, 6.4, 6.5, 6.6, 6.7, 6.8_


  - [x] 17.3 Финальная проверка качества кода


    - Проверить все JSDoc комментарии
    - Проверить единообразие стиля кодирования
    - Удалить неиспользуемый код
    - Проверить все имена переменных и функций
    - _Requirements: 7.1, 7.2, 7.3, 7.4, 7.5, 7.6, 7.7_

- [x] 18. Документация






  - [x] 18.1 Создать README.md


    - Добавить описание проекта
    - Добавить инструкции по установке
    - Добавить инструкции по использованию
    - Добавить информацию о структуре проекта
    - _Requirements: 7.8_


  - [x] 18.2 Добавить комментарии в код


    - Добавить JSDoc для всех публичных методов
    - Добавить заголовочные комментарии для модулей
    - Добавить комментарии для сложной логики
    - _Requirements: 7.2, 7.3, 7.4_

- [x] 19. Очистка проекта




  - [x] 19.1 Удалить устаревшие файлы


    - Удалить папку sort/ с устаревшими файлами
    - Удалить дублирующиеся CSS файлы
    - Удалить неиспользуемые изображения
    - _Requirements: 7.5_

  - [x] 19.2 Финальная проверка


    - Проверить что все работает после удаления
    - Проверить что нет битых ссылок
    - Проверить что все пути корректны
    - _Requirements: 1.1, 1.2, 5.1, 6.8_
