# News Module

## Overview
–ú–æ–¥—É–ª—å –Ω–æ–≤–æ—Å—Ç–µ–π —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π –ø–æ —Å—Ç—Ä–∞–Ω–∞–º –∏ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º, –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π —Å NewsService.

## Structure
```
news/
‚îú‚îÄ‚îÄ news.module.js      - Module wrapper (loads controller)
‚îú‚îÄ‚îÄ news.controller.js  - Business logic and state management
‚îî‚îÄ‚îÄ news.template.js    - HTML templates
```

## Features
- ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Å—Ç—Ä–∞–Ω–∞–º (US, RU, GB, DE, FR, IT, ES, TR)
- ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º (general, business, technology, entertainment, sports, science, health)
- ‚úÖ –ü–∞–≥–∏–Ω–∞—Ü–∏—è (prev/next)
- ‚úÖ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ NewsService
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –≤ localStorage
- ‚úÖ –°–æ—Å—Ç–æ—è–Ω–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ –∏ –æ—à–∏–±–æ–∫
- ‚úÖ –ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è –≤–µ—Ä—Å—Ç–∫–∞
- ‚úÖ Lazy loading –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- ‚úÖ HTML escaping –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

## Integration

### 1. Register the module in your app initialization:
```javascript
import { NewsModule } from './modules/news/news.module.js';

const newsModule = new NewsModule(app);
app.registerModule('news', newsModule);
```

### 2. Register the route:
```javascript
router.register('news', 'news', {
  title: '–ù–æ–≤–æ—Å—Ç–∏',
  requiresAuth: true
});
```

### 3. Ensure NewsService is registered:
```javascript
import { NewsService } from './services/news.service.js';
import { NEWSAPI_KEY } from './config.js';

const newsService = new NewsService(NEWSAPI_KEY);
app.registerService('news', newsService);
```

### 4. HTML structure required:
```html
<div id="news-content" data-module-content="news" class="hidden">
  <!-- Content will be rendered here -->
</div>
```

### 5. Tab button:
```html
<button data-route="news" class="tab-button">
  üì∞ –ù–æ–≤–æ—Å—Ç–∏
</button>
```

## Dependencies
- NewsService (js/services/news.service.js)
- NEWSAPI_KEY from config.js

## State Management
The controller maintains:
- `articles` - Current news articles
- `currentPage` - Current pagination page
- `currentCountry` - Selected country filter
- `currentCategory` - Selected category filter
- `isLoading` - Loading state
- `hasNextPage` - Whether more pages are available

## API
The module uses NewsData.io API through NewsService:
- Endpoint: `https://newsdata.io/api/1/news`
- Caching: 15 minutes
- Fallback: Mock data on API errors

## Styling
CSS classes used (need to be defined in css/components/news.css):
- `.news-container`
- `.news-controls`
- `.news-filters`
- `.filter-group`
- `.filter-label`
- `.filter-select`
- `.btn-refresh`
- `.news-grid`
- `.news-card`
- `.news-image-wrapper`
- `.news-image`
- `.news-content`
- `.news-title`
- `.news-description`
- `.news-meta`
- `.news-source`
- `.news-date`
- `.news-link`
- `.news-pagination`
- `.pagination-btn`
- `.pagination-info`
- `.news-empty`
- `.news-loading`
- `.loading-spinner`
- `.loading-text`
- `.news-error`

## Migration Notes
All functionality from the old `js/modules/news.js` has been migrated and improved:
- Better error handling
- Persistent settings
- Refresh functionality
- Better loading states
- Security improvements (HTML escaping)
- Performance improvements (lazy loading)
